# Seleksi 1 Lab. Basis Data 2023
## Description of The Data and DBMS
PostgreSQL is the chosen Database Management System (DBMS) to store and manage the scraped Valorant esports data. PostgreSQL is a powerful, open-source, and highly reliable relational database system that supports advanced features.

As a relational database, PostgreSQL follows the relational model, where data is organized into tables, and relationships are established through foreign keys. It supports SQL (Structured Query Language), which allows for efficient querying and manipulation of data.

The choice of PostgreSQL is well-suited for this project due to its robustness, scalability, and support for complex data structures. It provides a solid foundation for storing and querying the structured data related to Valorant tournaments, teams, and players, enabling efficient data retrieval and management.

## Specification of The Program
The purpose of this program is to scrape data from Liquipedia's websites, specifically focusing on retrieving information related to Valorant tournaments, teams, and players. It is designed to follow Liquipedia's rules and guidelines, ensuring responsible and authorized access to their content. The program aims to collect valuable data that can be used for analysis and insights within the realm of Valorant esports.

The program is structured into multiple modules, each responsible for retrieving data about specific entities. These modules include **tournaments.js**, which retrieves information about Valorant tournaments, such as their names, prizes, locations, participants, and winner/runner-up details. Another module, **tournamentDetail.js**, focuses on gathering detailed information about a specific tournament, including its tier, start date, and end date.

For data related to Valorant teams, both active and disbanded, the **teams.js** module comes into play. It extracts information about team names, player IDs, statuses (active or disbanded), and regions. Lastly, the **players.js** module is dedicated to obtaining data about Valorant players from various regions. It retrieves player IDs, URLs, full names, teams (if available), countries, and regions.

The main script, **scrap.js**, serves as the orchestrator of the data retrieval process. It coordinates the various modules to collect data from Liquipedia's websites. The program offers the flexibility to work in either online or offline mode, depending on the isOnline flag setting. In online mode, it sends HTTP requests to Liquipedia's websites using the Axios library to fetch the data directly. In offline mode, it reads previously stored HTML files from the local filesystem to retrieve the necessary data.

To respect Liquipedia's servers and avoid excessive load, the program incorporates a deliberate delay of 2 seconds between each HTTP request. This ensures responsible data retrieval without overwhelming their infrastructure.

Data is stored in JSON format for easy processing and analysis. Each module writes its respective data to separate JSON files. For example, tournament data is saved in **tournaments.json**, teams data in **teams.json**, and players data for each region in individual files like **europe.json**, **americas.json**, and so on. The main script also merges players' data from all regions into a single file named **players.json**.

The program includes error handling to gracefully manage any issues that may arise during data parsing or retrieval. If an error occurs, the program logs the error message and continues processing the remaining data entries.

The main function `parse()` in **scrap.js** serves as the entry point of the program. Upon execution, the program starts fetching data for teams, tournaments, and players from Liquipedia's websites and stores the results in the designated JSON files.

## How to Use
1. Run the scraping node using `node Data Scraping/src/scrap.js`.
2. Convert the JSON files to a single SQL file using `node Data Storing/src/convertsql.js`.
3. Navigate to the directory where the SQL file is generated by using `cd Data Storing/export`.
4. Log in to your PostgreSQL user by typing `psql -U <your_user_name>`.
5. Create a database called "liquipedia" by executing `CREATE DATABASE liquipedia;`.
6. Exit the PostgreSQL interface (CTRL+D), and then import your SQL file using `psql -U <your_user_name> -d liquipedia < liquipedia.sql`.
7. Re-login to your PostgreSQL.
8. Change your active database to "liquipedia" by using `\c liquipedia`.
9. Enjoy!

## JSON Structure
![JSON structure](Data%20Scraping/screenshot/JSON%20structure.png)

## Database Structure (ERD and Relational Diagram)
### ERD
![Entity Relationship Diagram](Data%20Storing/design/Entity%20Relationship%20Diagram.png)
### Relational Diagram
![Relational Diagram](Data%20Storing/design/Relational%20Diagram.png)

## Explanation of ERD to Relational Diagram Translation Process
1. Mapping entities into relations.
2. Mapping relationships into relations.

## Reference (Library used, etc)
* [Node.js's file system](https://nodejs.org/api/fs.html)
* [Axios](https://axios-http.com/docs/intro)
* [dotenv](https://www.npmjs.com/package/dotenv)
## Author
Syafiq Ziyadul Arifin
(18221048@std.stei.itb.ac.id)